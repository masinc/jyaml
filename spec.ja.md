# JYAML 仕様 バージョン 0.1

## 概要

JYAML(JSON-YAML Adaptive Markup Language)は、JSONの上位互換を持ち、YAMLの下位互換を持つデータフォーマットです。

データはJSONが表現できるもののみJYAMLでも表現することが可能です。

言い換えると JSON は全て JYAML データとして適正であり、JYAMLデータ は全て YAML データとして適正となります。

JYAMLは JSON フォーマットに YAML のブロックスタイルや複数行文字列スタイル、コメントなどが利用できるデータフォーマットです。

## JYAMLの利点と目的

JYAML (JSON-YAML Adaptive Markup Language) は、JSON と YAML の長所を組み合わせたデータフォーマットで、両者の利便性と柔軟性を兼ね備えています。JYAML の主な利点は以下の通りです。

- JSON と YAML の両方に精通している者にとって、学習コストが低いです。
- JSON の構造のシンプルさと維持しつつ、YAML の可読性を提供したフォーマットです。
- `#` で単一行のコメントを記述することができます。
- JSON と YAML の両方の中間データ構造をサポートするため、データ交換の際に両フォーマット間で容易に変換することができます。
- JSON と上位互換性があるため、JSON データは JYAML データとしても適正であり、スムーズに移行することができます。
- YAML と下位互換性があるため、JYAML データは YAMLデータとして適正です。YAML を利用するシステムやアプリケーションにて、 YAML固有の機能を活用されていない場合、そのままJYAML を利用することができます。

## バージョンについて

JYAMLのバージョンは 0.x は正式リリース前のバージョンとなります。

## 拡張子

JYAMLでは通常、次の拡張子のいずれかを利用します。

- jyml
- jyaml

また、YAMLとの相互利用のために、次の拡張子を利用することができます。

- j.yml
- j.yaml

## エンコーディング

JYAML では UTF-8 がサポートされています。

## インデントの取り扱い

Object 型、 Array 型のブロックスタイルや String型の複数行文字列を扱う場合、次のように扱われます。

- Object 型や Array 型のブロックスタイルでは、インデントによって構造が決まります。また、フロースタイルでは、ホワイトスペースは無視されます。
- インデントにはスペースを使用し、タブは許可されません。
- Object 型のキーと値の間のコロンの後には、1つ以上のホワイトスペースが必要です。

## コメント

JYAMLでは、YAMLのようにコメントを記述することができます。コメントは、行頭または値の後ろにハッシュ記号(`#`)を使用して追加できます。ハッシュ記号以降の行末までがコメントとして扱われ、JYAMLデータの解析には影響しません。

例:

```
# これはコメントです。
1 # これもコメントです。
```

## データ型

JYAML では次のデータ型が存在します。

- String
- Number
- Boolean
- Array
- Object
- Null

これらのデータ型はJSONと同様となります。

## String 型

単一行の String 型の値はシングルクォーテーションまたは、ダブルクォーテーションで囲うことで表現することが可能です。

例:

```
"aaa"
'aaa'
```

YAML と違い、クォーテーションなしで表現することはできません。


### エスケープ文字

JSON と同様に、印刷不可能な文字は `\` でエスケープすることで表現することができます。

JYAMLのエスケープできる文字を次のものとなります。

| エスケープ指定 | 結果            |
| -------------- | --------------- |
| `\"`           | `"`             |
| `\'`           | `'`             |
| `\\`           | `\`             |
| `\/`           | `/`             |
| `\b`           | Back Space      |
| `\f`           | Form Feed       |
| `\n`           | Line Feed       |
| `\r`           | Carriage Return |
| `\t`           | Tab             |
| `\uXXXX`       | Unicode         |

`\uXXXX` は `XXXX` に16進数で4桁の値を指定することで任意の Unicode 文字を表現することができます。


### 複数行文字列

複数行文字列は YAMLフォーマットと同等の記述方法を利用することができます。

`|` を利用することで、改行を維持したままの文字列を表現することができます。
`>` を利用することで、改行をスペースに変換した文字列を表現することができます。

例:

```
key1: |
  This is a
  multi-line
  string.
key2: >
  This is a
  single line
  string.
```

これらは単一行文字列とした時、次のようなデータとなります。

```
key1: "This is a \nmulti-line \nstring.\n"
key2: "This is a single line string."
```

## Number 型

Number 型は 10 進数で記述された先頭に 0 がない値となります。
`.` で小数点を表し、小数点以下の表記することができます。
先頭に `+` または、 `-` 記号を付与することができます。
`e` または `E` を利用することで指数をすることができます。

例:

```
1
+1
-1
1.23
1e2
1e-2
```

## Boolean 型

Boolean 型は `true` または、 `false` リテラルで値が表現できる型です。

YAML の `on`, `off`, `yes`, `no` リテラルなどは JYAMLでは不正な値です。

## Array 型

Array 型は 0 個以上の値を持つ型です。

Array 型はブロックスタイルまたは、フロースタイルで記述することができます。

ブロックスタイルは値ごとに改行してインデントを付けることで表現することができます。
フロースタイルは値の一覧を角括弧で囲い(`[`, `]`)値をカンマ(`,`)区切りで表現することができます。

ブロックスタイル例:

```
- 1
- 2
- 3
```

フロースタイル例:

```
[ 1, 2, 3 ]
```


## Object 型

Object 型は 0 個以上のキーと値のペアを持つ型です。

キーと値はコロン(`:`)で区切り、ペアとして表現することができます。

キーは String 型のみ利用することができ、複数行文字列表現は利用する事ができず、シングルクォーテーションまたは、ダブルクォーテーションを利用した単一行文字列表現にする必要があります。

Object 型はブロックスタイルまたは、フロースタイルで記述することができます。

ブロックスタイルは、ペアを改行してインデントを付けることで表現することができます。
フロースタイルは、ペアを波括弧で囲い(`{`, `}`)キーと値をカンマ(`,`)区切りで表現することができます。

ブロックスタイル例:

```
"a": 1
"b": 2
'c': 3
```

フロースタイル例:

```
{ "a": 1, "b": 2, "c": 3 }
```
